angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(e,t,i,a,r,n,o,s,l,c,u,d){function p(t){e.datepickerMode=t,e.datepickerOptions.datepickerMode=t}function h(t){var i;if(angular.version.minor<6)i=t.$options||e.datepickerOptions.ngModelOptions||l.ngModelOptions||{},i.getOption=function(e){return i[e]};else{var a=t.$options.getOption("timezone")||(e.datepickerOptions.ngModelOptions?e.datepickerOptions.ngModelOptions.timezone:null)||(l.ngModelOptions?l.ngModelOptions.timezone:null);i=t.$options.createChild(l.ngModelOptions).createChild(e.datepickerOptions.ngModelOptions).createChild(t.$options).createChild({timezone:a})}return i}var m=this,f={$setViewValue:angular.noop},D={range:"true"==i.range},g={},k=[];t.addClass("uib-datepicker"),i.$set("role","application"),e.datepickerOptions||(e.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(t){switch(t){case"customClass":case"dateDisabled":e[t]=e.datepickerOptions[t]||angular.noop;break;case"datepickerMode":e.datepickerMode=angular.isDefined(e.datepickerOptions.datepickerMode)?e.datepickerOptions.datepickerMode:l.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":m[t]=angular.isDefined(e.datepickerOptions[t])?r(e.datepickerOptions[t])(e.$parent):l[t];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":m[t]=angular.isDefined(e.datepickerOptions[t])?e.datepickerOptions[t]:l[t];break;case"startingDay":angular.isDefined(e.datepickerOptions.startingDay)?m.startingDay=e.datepickerOptions.startingDay:angular.isNumber(l.startingDay)?m.startingDay=l.startingDay:m.startingDay=(n.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":e.$watch("datepickerOptions."+t,function(e){e?angular.isDate(e)?m[t]=d.fromTimezone(new Date(e),g.getOption("timezone")):(c&&o.warn("Literal date support has been deprecated, please switch to date object usage"),m[t]=new Date(s(e,"medium"))):m[t]=l[t]?d.fromTimezone(new Date(l[t]),g.getOption("timezone")):null,m.refreshView()});break;case"maxMode":case"minMode":e.datepickerOptions[t]?e.$watch(function(){return e.datepickerOptions[t]},function(i){m[t]=e[t]=angular.isDefined(i)?i:e.datepickerOptions[t],("minMode"===t&&m.modes.indexOf(e.datepickerOptions.datepickerMode)<m.modes.indexOf(m[t])||"maxMode"===t&&m.modes.indexOf(e.datepickerOptions.datepickerMode)>m.modes.indexOf(m[t]))&&(e.datepickerMode=m[t],e.datepickerOptions.datepickerMode=m[t])}):m[t]=e[t]=l[t]||null}}),e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),e.disabled=angular.isDefined(i.disabled)||!1,angular.isDefined(i.ngDisabled)&&k.push(e.$parent.$watch(i.ngDisabled,function(t){e.disabled=t,m.refreshView()})),e.isActive=function(t){return 0===m.compare(t.date,m.activeDate)&&(e.activeDateId=t.uid,!0)},this.init=function(t){f=t,g=h(f),e.datepickerOptions.initDate?(m.activeDate=d.fromTimezone(e.datepickerOptions.initDate,g.getOption("timezone"))||new Date,e.$watch("datepickerOptions.initDate",function(e){e&&(f.$isEmpty(f.$modelValue)||f.$invalid)&&(m.activeDate=d.fromTimezone(e,g.getOption("timezone")),m.refreshView())})):m.activeDate=new Date;var i=f.$modelValue?new Date(f.$modelValue):new Date;this.activeDate=isNaN(i)?d.fromTimezone(new Date,g.getOption("timezone")):d.fromTimezone(i,g.getOption("timezone")),f.$render=function(){m.render()}},this.render=function(){if(D.range);else if(f.$viewValue){var e=new Date(f.$viewValue),t=!isNaN(e);t?this.activeDate=d.fromTimezone(e,g.getOption("timezone")):u||o.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element)if(D.range)this._refreshView();else{e.selectedDt=null,this._refreshView(),e.activeDt&&(e.activeDateId=e.activeDt.uid);var t=f.$viewValue?new Date(f.$viewValue):null;t=d.fromTimezone(t,g.getOption("timezone")),f.$setValidity("dateDisabled",!t||this.element&&!this.isDisabled(t))}},this.tdPosition=function(e){if(D.range){var t=this.setDate(f.$viewValue.startTime),i=this.setDate(f.$viewValue.endTime);return t=d.fromTimezone(t,g.getOption("timezone")),i=d.fromTimezone(i,g.getOption("timezone")),0==this.compare(e,t)?"start":0==this.compare(e,i)?"end":e>t&&e<i&&"middle"}var a=this.setDate(f.$viewValue);return a=d.fromTimezone(a,g.getOption("timezone")),!(!a||0!==this.compare(e,a))},this.createDateObject=function(e,t){var i=this.tdPosition(e),a=!!i,r=new Date;r=d.fromTimezone(r,g.getOption("timezone"));var n=this.compare(e,r),o={date:e,label:d.filter(e,t),selected:a,disabled:this.isDisabled(e),position:i,past:n<0,current:0===n,future:n>0,customClass:this.customClass(e)||null};return o},this.isDisabled=function(t){return e.disabled||this.minDate&&this.compare(t,this.minDate)<0||this.maxDate&&this.compare(t,this.maxDate)>0||e.dateDisabled&&e.dateDisabled({date:t,mode:e.datepickerMode,currentMonth:this.activeDate.getMonth()})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode,currentMonth:this.activeDate.getMonth()})},this.setDate=function(e){return e?new Date(e):null},this.split=function(e,t){for(var i=[];e.length>0;)i.push(e.splice(0,t));return i},e.select=function(t){if(e.datepickerMode===m.minMode){if(D.range){var i=new Date(0,0,0,0,0,0,0);i.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),i=d.toTimezone(i,g.getOption("timezone")),f.$viewValue.startTime?f.$viewValue.endTime?(f.$viewValue.startTime=i,f.$viewValue.endTime=null):i>f.$viewValue.startTime?f.$viewValue.endTime=i:(f.$viewValue.endTime=f.$viewValue.startTime,f.$viewValue.startTime=i):f.$viewValue.startTime=i}else{var i=f.$viewValue?d.fromTimezone(new Date(f.$viewValue),g.getOption("timezone")):new Date(0,0,0,0,0,0,0);i.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),i=d.toTimezone(i,g.getOption("timezone")),f.$setViewValue(i)}f.$render()}else m.activeDate=t,p(m.modes[m.modes.indexOf(e.datepickerMode)-1]),e.$emit("uib:datepicker.mode");e.$broadcast("uib:datepicker.focus")},e.move=function(e){var t=m.activeDate.getFullYear()+e*(m.step.years||0),i=m.activeDate.getMonth()+e*(m.step.months||0);m.activeDate.setFullYear(t,i,1),m.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===m.maxMode&&1===t||e.datepickerMode===m.minMode&&t===-1||(p(m.modes[m.modes.indexOf(e.datepickerMode)+t]),e.$emit("uib:datepicker.mode"))},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var v=function(){m.element[0].focus()};e.$on("uib:datepicker.focus",v),e.keydown=function(t){var i=e.keys[t.which];if(i&&!t.shiftKey&&!t.altKey&&!e.disabled)if(t.preventDefault(),m.shortcutPropagation||t.stopPropagation(),"enter"===i||"space"===i){if(m.isDisabled(m.activeDate))return;e.select(m.activeDate)}else!t.ctrlKey||"up"!==i&&"down"!==i?(m.handleKeyDown(i,t),m.refreshView()):e.toggleMode("up"===i?1:-1)},t.on("keydown",function(t){e.$apply(function(){e.keydown(t)})}),e.$on("$destroy",function(){for(;k.length;)k.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(e,t,i){function a(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?n[t]:29}function r(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1}var n=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=t,this.init=function(t){angular.extend(t,this),e.showWeeks=t.showWeeks,t.refreshView()},this.getDates=function(e,t){for(var i,a=new Array(t),r=new Date(e),n=0;n<t;)i=new Date(r),a[n++]=i,r.setDate(r.getDate()+1);return a},this._refreshView=function(){var t=this.activeDate.getFullYear(),a=this.activeDate.getMonth(),n=new Date(this.activeDate);n.setFullYear(t,a,1);var o=this.startingDay-n.getDay(),s=o>0?7-o:-o,l=new Date(n);s>0&&l.setDate(-s+1);for(var c=this.getDates(l,42),u=0;u<42;u++)c[u]=angular.extend(this.createDateObject(c[u],this.formatDay),{secondary:c[u].getMonth()!==a,uid:e.uniqueId+"-"+u});e.labels=new Array(7);for(var d=0;d<7;d++)e.labels[d]={abbr:i(c[d].date,this.formatDayHeader),full:i(c[d].date,"EEEE")};if(e.title=i(this.activeDate,this.formatDayTitle),e.rows=this.split(c,7),e.showWeeks){e.weekNumbers=[];for(var p=(11-this.startingDay)%7,h=e.rows.length,m=0;m<h;m++)e.weekNumbers.push(r(e.rows[m][p].date))}},this.compare=function(e,t){var i=e,a=t;return e&&(i=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i.setFullYear(e.getFullYear())),t&&(a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a.setFullYear(t.getFullYear())),i-a},this.handleKeyDown=function(e,t){var i=this.activeDate.getDate();if("left"===e)i-=1;else if("up"===e)i-=7;else if("right"===e)i+=1;else if("down"===e)i+=7;else if("pageup"===e||"pagedown"===e){var r=this.activeDate.getMonth()+("pageup"===e?-1:1);this.activeDate.setMonth(r,1),i=Math.min(a(this.activeDate.getFullYear(),this.activeDate.getMonth()),i)}else"home"===e?i=1:"end"===e&&(i=a(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(i)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(e,t,i){this.step={years:1},this.element=t,this.init=function(e){angular.extend(e,this),e.refreshView()},this._refreshView=function(){for(var t,a=new Array(12),r=this.activeDate.getFullYear(),n=0;n<12;n++)t=new Date(this.activeDate),t.setFullYear(r,n,1),a[n]=angular.extend(this.createDateObject(t,this.formatMonth),{uid:e.uniqueId+"-"+n});e.title=i(this.activeDate,this.formatMonthTitle),e.rows=this.split(a,this.monthColumns),e.yearHeaderColspan=this.monthColumns>3?this.monthColumns-2:1},this.compare=function(e,t){var i=e;e&&(e=new Date(e.getFullYear(),e.getMonth()),i.setFullYear(e.getFullYear()));var a=t;return t&&(a=new Date(t.getFullYear(),t.getMonth()),a.setFullYear(t.getFullYear())),i-a},this.handleKeyDown=function(e,t){var i=this.activeDate.getMonth();if("left"===e)i-=1;else if("up"===e)i-=this.monthColumns;else if("right"===e)i+=1;else if("down"===e)i+=this.monthColumns;else if("pageup"===e||"pagedown"===e){var a=this.activeDate.getFullYear()+("pageup"===e?-1:1);this.activeDate.setFullYear(a)}else"home"===e?i=0:"end"===e&&(i=11);this.activeDate.setMonth(i)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(e,t,i){function a(e){return parseInt((e-1)/n,10)*n+1}var r,n;this.element=t,this.yearpickerInit=function(){r=this.yearColumns,n=this.yearRows*r,this.step={years:n}},this._refreshView=function(){for(var t,i=new Array(n),o=0,s=a(this.activeDate.getFullYear());o<n;o++)t=new Date(this.activeDate),t.setFullYear(s+o,0,1),i[o]=angular.extend(this.createDateObject(t,this.formatYear),{uid:e.uniqueId+"-"+o});e.title=[i[0].date.getFullYear(),i[n-1].date.getFullYear()].join(" - "),e.rows=this.split(i,r),e.columns=r},this.compare=function(e,t){return!(!e||!t)&&e.getFullYear()-t.getFullYear()},this.handleKeyDown=function(e,t){var i=this.activeDate.getFullYear();"left"===e?i-=1:"up"===e?i-=r:"right"===e?i+=1:"down"===e?i+=r:"pageup"===e||"pagedown"===e?i+=("pageup"===e?-1:1)*n:"home"===e?i=a(this.activeDate.getFullYear()):"end"===e&&(i=a(this.activeDate.getFullYear())+n-1),this.activeDate.setFullYear(i)}}]).directive("uibDatepicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"./libs/datepicker/html/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(e,t,i,a){var r=a[0],n=a[1];e.$on("$RESET_DATEPICKER",function(){r.init(n)}),r.init(n)}}}).directive("uibDaypicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"./libs/datepicker/html/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(e,t,i,a){var r=a[0],n=a[1];n.init(r)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"./libs/datepicker/html/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(e,t,i,a){var r=a[0],n=a[1];n.init(r)}}}).directive("uibYearpicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"./libs/datepicker/html/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(e,t,i,a){var r=a[0];angular.extend(r,a[1]),r.yearpickerInit(),r.refreshView()}}});